#!/usr/bin/env python
import rospy
import qrcode

rospy.init_node('generate_qr_code_node')
rospy.loginfo('Inside generate_qr_code script')

while not rospy.is_shutdown():
    x, y, host, port, filename = raw_input("Enter arguments: ").split()
    str_ = "http://{}:{}/beverage?x={}&y={}".format(host, port, x, y)
    qr = qrcode.QRCode(
        version=None,
        error_correction=qrcode.constants.ERROR_CORRECT_M,
        box_size=10,
        border=4,
    )
    qr.add_data(str_)
    qr.make(fit=True)
    img = qr.make_image(fill_color="black", back_color="white")
    img.save(filename)
